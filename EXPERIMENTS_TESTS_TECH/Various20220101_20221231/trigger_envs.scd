/* 13 Nov 2022 12:59
Re-triggering envelopes
*/
//:
{
	var trigger;
	trigger = Impulse.kr(20);
	WhiteNoise.ar(0.1) * Env.perc.kr(gate: trigger, doneAction: 0)
} +> \test;
//:
{
	var trigger;
	trigger = Impulse.kr(Line.kr(1, 10, 30));
	WhiteNoise.ar(0.1) * Env([0, 0.1, 0.1, 0], [0.1, 0.1, 0.1]).kr(gate: trigger, doneAction: 0)
} +> \test;
//:Test this as way to smooth out triggers generated by slope + moving sensor data
{
	var trigger, sig, check, prolongEnv;
	trigger = Impulse.kr(SinOsc.kr(1/15, 3pi / 2).range(0.3, 5), pi);
	check = WhiteNoise.ar(0.1) * Decay.kr(trigger, 0.01);
	// Use this here:
	prolongEnv = Env([0, 0.1, 0.1, 0], [0.1, 0.25, 0.1]).kr(gate: trigger, doneAction: 0);
	sig = SinOsc.ar(440) * prolongEnv;
	[check, sig];
} +> \test;
//:
{
	SinOsc.ar(120, [0, 3pi / 2 ], 0.1).range(0.1, 1)
}.plot;

//+> \test;
//:
{
	var trigger;
	trigger = Impulse.kr(Line.kr(1, 10, 30));
	SinOsc.ar(440) * Env([0, 0.1, 0], [0.5, 0.5]).kr(gate: trigger, doneAction: 0).dup
} +> \test;
//:decay vs. lag
//:decay
{
	var trigger;
	trigger = Impulse.kr(Line.kr(0.1, 20, 120));
	// trigger = Impulse.kr(1);
	WhiteNoise.ar(0.1) * Decay.kr(trigger, 5)
} +> \test
//:decay
{
	var trigger;
	trigger = Impulse.kr(Line.kr(0.1, 20, 120));
	// trigger = Impulse.kr(1);
	WhiteNoise.ar(0.1) * Decay2.kr(trigger, 1, 5)
} +> \test
//:lag
{
	var trigger;
	trigger = Impulse.kr(LFSaw.kr(0.1).range(1, 20));
	WhiteNoise.ar(1) * trigger.lag(0.5)
} +> \test
//:
Env.adsr(attackTime: 1, decayTime: 10).plot;
//:
Server.default.scope;